# 异常报告

已知可能出现的bug将会列在此处，并指明修复期限和任务执行者。

使用中遇到的bug和错误放在此处。参照下列格式：

## 标题用简短的一句话描述

### 出现问题的application/module/bsp

描述你的使用方法，应该贴上图片或代码块，以及硬件连线等

### 尝试解决的方案

你的尝试，以及猜测可能的错误

### 如何复现问题

问题能否稳定复现？描述复现方法等

### 紧急程度

这里用⭐表示。最大5颗⭐。

如果不修复，会有何种其他牵连情况发生？

---

不同的问题用 --- 分隔开

你还可以使用Stepsize插件在代码出现问题（可能出现问题）的地方添加issues并详尽描述。或在gitee上增加issues。

当然，最快的方法是在群里提问。

## 使用LK电机并挂载在hcan2上时会出现HardFault

> 已修复此问题。修复日志请查看当前目录下的“如何定位bug.md”。

使用MF9025v2电机,并将其配置在CAN2上。经过一次LKMotorControl，第二次进入时hcan->instance会在HAL_CAN_Add_Tx_Message()结束时被未知的语句修改成奇怪的值，造成HardFault

### 尝试解决的方案

单步调试无果，在HAL_CAN_Add_Tx_Message()返回的那一步hcan->instance会莫名其妙变成0，hcan2也会被修改到一个0x8000xxx的地址上(hcan是HAL库自定的全局变量)

### 如何复现问题

使用LK电机并将其挂载在CAN2上，连接电机后直接运行。在第二次进入MotorTAsk中的LKMotorControl时，于检查空闲CAN邮箱时，由于hcan2被修改，访问CAN2外设状态时会访问野指针导致HardFault。

### 紧急程度

⭐⭐⭐⭐⭐

## 总线挂载多个电机后,pitch和yaw的GM6020电机出现编码器反馈值跳动

> 已修复，详细信息见“如何定位bug.md”

CAN1总线挂载5个电机,4\*3508+1\*6020,控制报文发送频率为500Hz,电机的反馈频率皆为1kHz.云台在控制时会出现突然跳动.添加到Ozone graph查看发现ECD(编码器)值在静止状态下也会出现突然抖动,并且幅度超过4000.但不会出现超过编码器反馈值范围的值.

### 尝试解决的方案

若使用单个6020电机,不会出现此问题. 曾认为是指针越界导致`motor_measure->ecd`值被修改, 需要进一步观察其他反馈值是否出现问题. 且反馈值始终在编码器范围之内.

### 如何复现问题

同时启用CAN1和CAN2，并在单条CAN总线上挂载超过5个电机.

### 紧急程度

⭐⭐⭐